# 如何撰写一个代码审阅评论

## 总结

- 友好
- 解释清楚你的论点
- 单纯指出问题和给出一个明确的方向二者要做平衡，不要让开发者自己做选择。
- 鼓励开发者去简化自己的代码，增加更多的注释，而不是向审阅者去解释其中的复杂度



## 礼貌

- 通常，在代码审阅期间，给予开发者足够的[礼貌和尊重](https://chromium.googlesource.com/chromium/src/+/master/docs/cr_respect.md)也很重要，这也能使他们的代码写的更加清晰。其中一种方式就是永远只对代码做评论而不对他人做评论。不需要总是按照实践的方式去做,不过在谈及一些会令人感到不高兴或者不理解的事情时，此实践必须要使用，举例：

- 做的不好的：为什么你要在这大量的使用对并发完全没有帮助的线程？

- 做的好的：这里的并发模型中添加了不少复杂的东西，我没有在系统的发现实际的性能好处。这里没有带来性能的优化，对于这段代码最好是使用单线程而不是使用多线程的的形式。

  

## 解释清楚为什么

- 写一些好的例子有助于开发者理解为什么审阅者会留下这样的评论。审阅评论中也不是都需要去这样做，但是有时候对于你的意图留下一些解释、认可的最佳实践、或者怎么去改善代码质量的建议。



## 给与指导

- 改进变更中的缺陷，通常是开发者的责任而不是审阅者的。你不需要写一个详细设计的解决方案或者给开发者留下代码。
- 这也不意味着审阅者应该不做帮助。通常你需要平衡指出问题和提供直接的指导二者关系。直接指出问题，让开发者自己做决定通常有助于开发者学到怎么去改进，也能让审阅者的审阅能更好的进行下去。也可以给一个更好的解决方案定论，因为开发者比审阅者更了解代码。
- 有时候，直接的指导，建议甚至是代码更有助于开发者的成长。代码审阅的最主要目的就是尽可能让变更做到最好。次要的目的才是提高开发者的技能，让审阅的次数越来越少。
- 记住一点，开发者需要从他们做的好的地方和需要做的更好的地方得到加强，如果发现变更中你认可的地方，也请留下评论，举例：开发者整理了一个凌乱的算法，添加示例性测试覆盖率，或者作为开发者的你从变更中学到的东西。所有的评论，包含你认可的修改，能鼓励开发者继续去做进一步的最佳实践落地。



## 接受解释

- 如果审阅者要求开发者解释这段你看不懂的代码，应该要求开发者更清晰的去重写这段代码，偶尔添加一些注释到代码中区也是一个合适的对应，只要不是单单解释复杂的代码。
- 只通过代码审阅工具写解释不利于以后代码阅读者的阅读。这种做法仅在少数情况下可以接受。比如审阅者在审阅一个不太熟悉的模块时，开发者会解释一些普通阅读者已经知道的内容。



## 下一篇： [处理代码审阅中的阻力](https://github.com/Trojan0523/Code-Review-Docs/blob/main/Chinese/%E5%A4%84%E7%90%86%E4%BB%A3%E7%A0%81%E5%AE%A1%E9%98%85%E7%9A%84%E9%98%BB%E5%8A%9B.md)

